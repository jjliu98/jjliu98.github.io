const __vite__fileDeps=["assets/APlayer.min-CAgWaKXK.js","assets/commonjsHelpers-Cpj98o6Y.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{f as p,k as f,A as M,g as _,r as v,o as b,M as g,w as h,b as l,N as A,O as P,e as w,_ as E,L as x}from"./app-_sW_HT98.js";import G from"./MyIcon-CmWIZqdn.js";import{a as C}from"./axios-B6xwUs71.js";import{_ as I}from"./plugin-vue_export-helper-DlAUqK2U.js";const S={class:"MyMusic"},B=l("div",{id:"GlobalAPlayer"},null,-1),L=p({__name:"NavMusic",setup(N){let i,s=f(!1),a=[];const m=()=>{s.value=!s.value},r=()=>{s.value&&(s.value=!1)},u=()=>{const e=document.querySelector(".vp-navbar-end");if(!e)return;if(!document.querySelector("#MyMusic_Menu")){const o=document.createElement("div");o.id="MyMusic_Menu",o.classList.add("nav-item"),o.innerHTML='<div id="MyMusic_icon" class="btnImg"></div>',e.appendChild(o)}const t=document.querySelector("#MyMusic_Menu");t.onclick=o=>{m(),o.stopPropagation()};const n=document.querySelector(".MyMusic");n.onclick=o=>{o.stopPropagation()}},d=()=>{if(!i)return;const e=window,t=document.getElementById("GlobalAPlayer");!t||a.length<1||(c(),t.classList.contains("aplayer"))||(e.GlobalAPlayer=new i({container:document.getElementById("GlobalAPlayer"),audio:a,lrcType:3,listFolded:!1,listMaxHeight:"324px",mini:!1,fixed:!1,volume:1,storageName:"GlobalAPlayer"}),e.GlobalAPlayer.on("play",function(){c()}),e.GlobalAPlayer.on("pause",function(){c()}))};function c(){var t,n;const e=window;e.GlobalAPlayer&&e.GlobalAPlayer.mode&&(e.GlobalAPlayer.paused?(t=document.getElementById("MyMusic_icon"))==null||t.setAttribute("spin","false"):(n=document.getElementById("MyMusic_icon"))==null||n.setAttribute("spin","true"))}const y=e=>{C({method:"get",url:"//cdn.jsdelivr.net/gh/jjliu98/assets/blog-music/list.json",params:{}}).then(t=>{var n=t.data;n&&n.length>0&&(a=n),console.log("加载音乐列表",a),e&&e()})};return M(()=>{const e=_();y(()=>{E(()=>import("./APlayer.min-CAgWaKXK.js").then(t=>t.A),__vite__mapDeps([0,1])).then(t=>{x(()=>{i=t.default,u(),d(),window.document.body.onclick=()=>{r()}}),e.beforeEach(()=>{setTimeout(()=>{u(),d()},50)})})})}),(e,t)=>{const n=v("ClientOnly");return b(),g(n,null,{default:h(()=>[l("div",S,[l("div",{class:A(["MyMusic_Play",{hide:!P(s)}])},[l("div",{class:"close",onClick:r},[w(G,{name:"guanbi"})]),B],2)])]),_:1})}}}),O=I(L,[["__file","NavMusic.vue"]]);export{O as default};
